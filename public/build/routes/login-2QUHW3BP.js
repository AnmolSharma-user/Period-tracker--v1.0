import{a as q,b as I}from"/build/_shared/chunk-O7ZHU2XC.js";import{a as c}from"/build/_shared/chunk-6KU7KB65.js";import{a as u}from"/build/_shared/chunk-TLKRROZH.js";import{a as x,b as L,c as C,d as k,e as E,f as A,g as F,k as D}from"/build/_shared/chunk-PLAFFANM.js";import{b as S}from"/build/_shared/chunk-6NL3JN34.js";import"/build/_shared/chunk-YE2UENJQ.js";import{a as y}from"/build/_shared/chunk-KTYYHXXO.js";import{a as j,f as m}from"/build/_shared/chunk-57Q5BGZR.js";import"/build/_shared/chunk-HB276KJY.js";import{a as H,c as w,f as l,n as d}from"/build/_shared/chunk-JP2RFOQ7.js";import{d as t}from"/build/_shared/chunk-G5WX4PPA.js";var G=t(j(),1);var n=t(H(),1);var r=t(d(),1);function B(){let p=w(),{toast:f}=y(),[g,_]=(0,n.useState)(""),[v,T]=(0,n.useState)(""),[h,b]=(0,n.useState)(null),[a,N]=(0,n.useState)(!1);return(0,r.jsxs)("form",{onSubmit:async s=>{if(s.preventDefault(),!a)try{N(!0),b(null);let{data:o,error:i}=await m.auth.signInWithPassword({email:g,password:v});if(i)throw i;if(o.user){let{data:W}=await m.from("user_preferences").select("*").eq("user_id",o.user.id).single();f({title:"Welcome back!",description:"You have successfully signed in."}),p(W?"/dashboard":"/onboarding")}}catch(o){let i=o instanceof Error?o.message:"Failed to sign in";b(i),f({variant:"destructive",title:"Error",description:i})}finally{N(!1)}},className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(u,{htmlFor:"email",children:"Email"}),(0,r.jsx)(c,{id:"email",type:"email",placeholder:"Enter your email",value:g,onChange:s=>_(s.target.value),required:!0,disabled:a,className:"bg-background"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(u,{htmlFor:"password",children:"Password"}),(0,r.jsx)(l,{to:"/forgot-password",className:"text-sm text-primary hover:underline",children:"Forgot password?"})]}),(0,r.jsx)(c,{id:"password",type:"password",placeholder:"Enter your password",value:v,onChange:s=>T(s.target.value),required:!0,disabled:a,className:"bg-background"})]}),h&&(0,r.jsx)(A,{variant:"destructive",children:(0,r.jsx)(F,{children:h})}),(0,r.jsxs)(S,{type:"submit",className:"w-full",disabled:a,children:[a&&(0,r.jsx)(D,{className:"mr-2 h-4 w-4 animate-spin"}),"Sign In"]})]})}var e=t(d(),1);function P(){return(0,e.jsx)("main",{className:"min-h-screen flex items-center justify-center p-4 bg-background",children:(0,e.jsxs)("div",{className:"w-full max-w-md",children:[(0,e.jsxs)("div",{className:"text-center mb-8",children:[(0,e.jsx)("h1",{className:"text-4xl font-bold tracking-tight",children:"Welcome Back"}),(0,e.jsx)("p",{className:"text-muted-foreground mt-2",children:"Sign in to your account to continue"})]}),(0,e.jsxs)(x,{children:[(0,e.jsxs)(L,{children:[(0,e.jsx)(C,{children:"Sign In"}),(0,e.jsx)(k,{children:"Choose your preferred sign in method"})]}),(0,e.jsxs)(E,{className:"space-y-6",children:[(0,e.jsx)(I,{mode:"login"}),(0,e.jsxs)("div",{className:"relative",children:[(0,e.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,e.jsx)(q,{className:"w-full"})}),(0,e.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,e.jsx)("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with email"})})]}),(0,e.jsx)(B,{}),(0,e.jsxs)("div",{className:"text-center text-sm",children:[(0,e.jsxs)("span",{className:"text-muted-foreground",children:["Don't have an account?"," "]}),(0,e.jsx)(l,{to:"/signup",className:"text-primary underline-offset-4 hover:underline",children:"Sign up"})]})]})]})]})})}export{P as default};
