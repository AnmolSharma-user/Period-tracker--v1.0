import{a as d}from"/build/_shared/chunk-TE53RJ7G.js";import"/build/_shared/chunk-EKVI7LUR.js";import{a as E}from"/build/_shared/chunk-6KU7KB65.js";import{a as o}from"/build/_shared/chunk-TLKRROZH.js";import{a as b,b as L,c as _,d as S,e as k,f as P,g as R,h as A,k as D}from"/build/_shared/chunk-PLAFFANM.js";import{b as n}from"/build/_shared/chunk-6NL3JN34.js";import"/build/_shared/chunk-YE2UENJQ.js";import{a as C}from"/build/_shared/chunk-KTYYHXXO.js";import{a as G,f as w}from"/build/_shared/chunk-57Q5BGZR.js";import"/build/_shared/chunk-HB276KJY.js";import{a as z,c as y,j as N,n as x}from"/build/_shared/chunk-JP2RFOQ7.js";import{d as a}from"/build/_shared/chunk-G5WX4PPA.js";var q=a(G(),1);var t=a(z(),1),e=a(x(),1);function F(){let{user:H,profile:I,preferences:i}=N(),c=y(),{toast:l}=C(),[m,p]=(0,t.useState)(!1),[u,f]=(0,t.useState)(null),[h,B]=(0,t.useState)(i.cycle_length.toString()),[g,T]=(0,t.useState)(i.has_period_reminders),[v,j]=(0,t.useState)(i.has_pill_reminders);return(0,e.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,e.jsx)("header",{className:"border-b",children:(0,e.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,e.jsxs)("div",{className:"flex items-center gap-4",children:[(0,e.jsx)(n,{variant:"ghost",size:"icon",onClick:()=>c("/dashboard"),children:(0,e.jsx)(A,{className:"h-4 w-4"})}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h1",{className:"text-2xl font-bold",children:"Settings"}),(0,e.jsx)("p",{className:"text-sm text-muted-foreground",children:"Update your preferences"})]})]})})}),(0,e.jsx)("main",{className:"container mx-auto px-4 py-8",children:(0,e.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,e.jsxs)(b,{children:[(0,e.jsxs)(L,{children:[(0,e.jsx)(_,{children:"Preferences"}),(0,e.jsx)(S,{children:"Customize your period tracking experience"})]}),(0,e.jsxs)(k,{className:"space-y-6",children:[(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsx)(o,{htmlFor:"cycleLength",children:"Cycle Length (days)"}),(0,e.jsx)(E,{id:"cycleLength",type:"number",min:21,max:35,value:h,onChange:r=>B(r.target.value),className:"w-32"}),(0,e.jsx)("p",{className:"text-sm text-muted-foreground",children:"Most cycles are between 21 and 35 days"})]}),(0,e.jsxs)("div",{className:"space-y-4",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{className:"space-y-0.5",children:[(0,e.jsx)(o,{children:"Period Reminders"}),(0,e.jsx)("p",{className:"text-sm text-muted-foreground",children:"Get notified about your upcoming periods"})]}),(0,e.jsx)(d,{checked:g,onCheckedChange:T})]}),(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{className:"space-y-0.5",children:[(0,e.jsx)(o,{children:"Pill Reminders"}),(0,e.jsx)("p",{className:"text-sm text-muted-foreground",children:"Get reminded to take your pills"})]}),(0,e.jsx)(d,{checked:v,onCheckedChange:j})]})]}),u&&(0,e.jsx)(P,{variant:"destructive",children:(0,e.jsx)(R,{children:u})}),(0,e.jsxs)(n,{onClick:async()=>{try{p(!0),f(null);let r=parseInt(h);if(isNaN(r)||r<21||r>35)throw new Error("Cycle length must be between 21 and 35 days");let{error:s}=await w.from("user_preferences").update({cycle_length:r,has_period_reminders:g,has_pill_reminders:v}).eq("user_id",H.id);if(s)throw s;l({title:"Settings updated",description:"Your preferences have been saved successfully."}),c("/dashboard")}catch(r){let s=r instanceof Error?r.message:"Failed to update settings";f(s),l({variant:"destructive",title:"Error",description:s})}finally{p(!1)}},disabled:m,className:"w-full",children:[m&&(0,e.jsx)(D,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Changes"]})]})]})})})]})}export{F as default};
