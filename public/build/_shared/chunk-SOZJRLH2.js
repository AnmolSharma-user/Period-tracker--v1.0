import{d as g}from"/build/_shared/chunk-EKVI7LUR.js";import{b as O,c as T}from"/build/_shared/chunk-57Q5BGZR.js";import{a as y,n as w}from"/build/_shared/chunk-JP2RFOQ7.js";import{d as v}from"/build/_shared/chunk-G5WX4PPA.js";var A=v(y(),1);var x=v(y(),1),_=v(w(),1);function L(t,e=[]){let n=[];function i(u,l){let m=x.createContext(l),o=n.length;n=[...n,l];function r(f){let{scope:N,children:c,...s}=f,C=N?.[t][o]||m,p=x.useMemo(()=>s,Object.values(s));return(0,_.jsx)(C.Provider,{value:p,children:c})}function R(f,N){let c=N?.[t][o]||m,s=x.useContext(c);if(s)return s;if(l!==void 0)return l;throw new Error(`\`${f}\` must be used within \`${u}\``)}return r.displayName=u+"Provider",[r,R]}let a=()=>{let u=n.map(l=>x.createContext(l));return function(m){let o=m?.[t]||u;return x.useMemo(()=>({[`__scope${t}`]:{...m,[t]:o}}),[m,o])}};return a.scopeName=t,[i,D(a,...e)]}function D(...t){let e=t[0];if(t.length===1)return e;let n=()=>{let i=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(u){let l=i.reduce((m,{useScope:o,scopeName:r})=>{let f=o(u)[`__scope${r}`];return{...m,...f}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return n.scopeName=e.scopeName,n}var E=v(w(),1);function H(t){let e=t+"CollectionProvider",[n,i]=L(e),[a,u]=n(e,{collectionRef:{current:null},itemMap:new Map}),l=c=>{let{scope:s,children:C}=c,p=A.default.useRef(null),M=A.default.useRef(new Map).current;return(0,E.jsx)(a,{scope:s,itemMap:M,collectionRef:p,children:C})};l.displayName=e;let m=t+"CollectionSlot",o=A.default.forwardRef((c,s)=>{let{scope:C,children:p}=c,M=u(m,C),S=O(s,M.collectionRef);return(0,E.jsx)(T,{ref:S,children:p})});o.displayName=m;let r=t+"CollectionItemSlot",R="data-radix-collection-item",f=A.default.forwardRef((c,s)=>{let{scope:C,children:p,...M}=c,S=A.default.useRef(null),h=O(s,S),P=u(r,C);return A.default.useEffect(()=>(P.itemMap.set(S,{ref:S,...M}),()=>void P.itemMap.delete(S))),(0,E.jsx)(T,{[R]:"",ref:h,children:p})});f.displayName=r;function N(c){let s=u(t+"CollectionConsumer",c);return A.default.useCallback(()=>{let p=s.collectionRef.current;if(!p)return[];let M=Array.from(p.querySelectorAll(`[${R}]`));return Array.from(s.itemMap.values()).sort((P,b)=>M.indexOf(P.ref.current)-M.indexOf(b.ref.current))},[s.collectionRef,s.itemMap])}return[{Provider:l,Slot:o,ItemSlot:f},N,i]}var d=v(y(),1);var U=v(y(),1);function $(t,e){return U.useReducer((n,i)=>e[n][i]??n,t)}var j=t=>{let{present:e,children:n}=t,i=W(e),a=typeof n=="function"?n({present:i.isPresent}):d.Children.only(n),u=O(i.ref,F(a));return typeof n=="function"||i.isPresent?d.cloneElement(a,{ref:u}):null};j.displayName="Presence";function W(t){let[e,n]=d.useState(),i=d.useRef({}),a=d.useRef(t),u=d.useRef("none"),l=t?"mounted":"unmounted",[m,o]=$(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return d.useEffect(()=>{let r=I(i.current);u.current=m==="mounted"?r:"none"},[m]),g(()=>{let r=i.current,R=a.current;if(R!==t){let N=u.current,c=I(r);t?o("MOUNT"):c==="none"||r?.display==="none"?o("UNMOUNT"):o(R&&N!==c?"ANIMATION_OUT":"UNMOUNT"),a.current=t}},[t,o]),g(()=>{if(e){let r,R=e.ownerDocument.defaultView??window,f=c=>{let C=I(i.current).includes(c.animationName);if(c.target===e&&C&&(o("ANIMATION_END"),!a.current)){let p=e.style.animationFillMode;e.style.animationFillMode="forwards",r=R.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=p)})}},N=c=>{c.target===e&&(u.current=I(i.current))};return e.addEventListener("animationstart",N),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{R.clearTimeout(r),e.removeEventListener("animationstart",N),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else o("ANIMATION_END")},[e,o]),{isPresent:["mounted","unmountSuspended"].includes(m),ref:d.useCallback(r=>{r&&(i.current=getComputedStyle(r)),n(r)},[])}}function I(t){return t?.animationName||"none"}function F(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}export{H as a,j as b};
